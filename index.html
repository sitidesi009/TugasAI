<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GSA-AI | Strategy Assistant</title>

<style>
body {
    font-family: 'Segoe UI', sans-serif;
    background: linear-gradient(135deg, #0f172a, #1e293b);
    color: white;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    margin: 0;
}

.card {
    background: rgba(30,41,59,0.9);
    padding: 30px;
    border-radius: 15px;
    width: 650px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.4);
    backdrop-filter: blur(10px);
    animation: fadeIn 0.6s ease-in-out;
}

h2 {
    text-align: center;
    margin-bottom: 20px;
}

label {
    font-size: 14px;
    opacity: 0.8;
}

input {
    width: 100%;
    padding: 12px;
    margin: 8px 0 15px;
    background: #0f172a;
    color: white;
    border: 1px solid #334155;
    border-radius: 8px;
    box-sizing: border-box;
    transition: 0.2s;
}

input:focus {
    border-color: #6366f1;
    outline: none;
}

button {
    width: 100%;
    padding: 12px;
    background: #6366f1;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.2s;
}

button:hover {
    background: #4f46e5;
}

button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}

#hasil {
    margin-top: 20px;
    display: none;
    animation: fadeIn 0.4s ease-in-out;
}

/* Table Style */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    font-size: 14px;
}

th, td {
    padding: 12px;
    border-bottom: 1px solid #334155;
    text-align: left;
    vertical-align: top;
}

th {
    background: #1e293b;
    color: #6366f1;
}

tr:hover {
    background: rgba(99,102,241,0.08);
}

/* Spinner */
.spinner {
  border: 4px solid #334155;
  border-top: 4px solid #6366f1;
  border-radius: 50%;
  width: 30px;
  height: 30px;
  animation: spin 1s linear infinite;
  margin: 10px auto;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
</style>
</head>

<body>
<div class="card">
    <h2>üöÄ GSA-AI Assistant</h2>

    <label>Nama Game</label>
    <input type="text" id="game">

    <label>Jumlah Pemain</label>
    <input type="number" id="players">

    <label>Rata-rata Durasi (Menit)</label>
    <input type="number" id="playtime">

    <button onclick="proses()">Analisis Sekarang</button>

    <div id="hasil"></div>
</div>

<script>
function proses() {
    const game = document.getElementById('game').value.trim();
    const players = document.getElementById('players').value;
    const playtime = document.getElementById('playtime').value;

    const box = document.getElementById('hasil');
    const btn = document.querySelector('button');

    if (!game || !players || !playtime) {
        box.style.display = "block";
        box.innerHTML = "‚ö†Ô∏è Harap isi semua field.";
        return;
    }

    const data = { game, players, playtime };

    box.style.display = "block";
    box.innerHTML = `
        <div class="spinner"></div>
        <p style="text-align:center;">AI sedang menganalisis strategi...</p>
    `;

    btn.disabled = true;
    btn.innerText = "Memproses...";

    fetch('/proses_ai', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(result => {

        if (result.error) {
            box.innerHTML = "‚ùå " + result.error;
        } else {

            let table = `
                <table>
                    <tr>
                        <th>Strategi</th>
                        <th>Deskripsi</th>
                        <th>Estimasi Dampak</th>
                    </tr>
            `;

            result.forEach(item => {
                table += `
                    <tr>
                        <td>${item.strategi}</td>
                        <td>${item.deskripsi}</td>
                        <td>${item.estimasi_dampak}</td>
                    </tr>
                `;
            });

            table += "</table>";

            box.innerHTML = table;
        }

        btn.disabled = false;
        btn.innerText = "Analisis Sekarang";
    })
    .catch(err => {
        box.innerHTML = "‚ùå Terjadi kesalahan koneksi.";
        btn.disabled = false;
        btn.innerText = "Analisis Sekarang";
    });
}
</script>
</body>
</html>